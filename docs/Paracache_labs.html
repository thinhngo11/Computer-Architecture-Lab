<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài Thực Hành - Mô phỏng Bộ nhớ</title>
    <link rel="stylesheet" href="css/mota.css">
</head>
<body>
  <div class="container">
    <h1>Nội dung các bài thực hành</h1>
      <p>
        Các bài thực hành sau đây giúp sinh viên hiểu rõ cách tổ chức và vận hành của ba cấp bộ nhớ chính trong 
        máy tính: bộ nhớ cache, bộ nhớ chính (RAM) và bộ nhớ ảo thông qua công cụ mô phỏng trực tuyến ParaCache. 
        Trình mô phỏng cho phép sinh viên quan sát cơ chế ánh xạ dữ liệu vào cache, so sánh các thuật toán thay 
        thế khối (LRU, FIFO, Random), và phân tích hiện tượng cache hit/miss. Đồng thời, mô phỏng cũng minh họa 
        rõ cách địa chỉ ảo được ánh xạ sang địa chỉ vật lý, từ đó giúp sinh viên hiểu vai trò của bộ nhớ chính và 
        bộ nhớ ảo trong quản lý phân trang. Nhờ giao diện trực quan và dễ thao tác, sinh viên có thể tiếp cận toàn 
        diện khái niệm bộ nhớ phân cấp mà không cần cài đặt phần mềm chuyên biệt.
      </p>
      
      <h3>Các bài thực hành Kiến trúc máy tính</h3>
    
      <ol>
        <li>
          <strong>Bài 1: Mô phỏng truy cập bộ nhớ chính và bộ nhớ Cache ánh xạ trực tiếp (Direct Mapped Cache)</strong>
          <div class="image-bonhoao">
            <div class="note1">
              <ul>
                <li><strong>Cache Size</strong> → 8</li>
                <li><strong>Memory Size</strong> → 16</li>
                <li><strong>Offset Bits</strong> → 2</li>
                <li><strong>Nhập lần lượt LOAD<sub>(in hex)</sub>#</strong> → 4, 3, 1</li>
              </ul>
            </div>
            <img src="images/bonho.jpg" class="responsive-img3" alt="Mô phỏng bộ nhớ ảo">
          </div>

          <div class="note-box">
            <h4>Cấu hình ban đầu</h4>
            <ul>
              <li>Cache Size = 8 bytes → Cache có tổng dung lượng 8 bytes</li>
              <li>Memory Size = 16 bytes → Bộ nhớ chính có tổng dung lượng 16 bytes</li>
              <li>Offset Bits = 2 → Mỗi block có kích thước 2<sup>2</sup> = 4 bytes</li>
              <li>Cache có số dòng = 8 / 4 = 2 dòng</li>
              <li>Địa chỉ bộ nhớ tổng dài 4 bit (vì 2<sup>4</sup> = 16 địa chỉ)</li>
              <li>Tag bits = 4 - 2 (offset) - 1 (index) = 1 bit</li>
            </ul>

            <h4>Nhập lệnh truy cập lần lượt</h4>
            <ul>
              <li>LOAD<sub>(in hex)</sub># → 4</li>
              <li>LOAD<sub>(in hex)</sub># → 3</li>
              <li>LOAD<sub>(in hex)</sub># → 1</li>
            </ul>

            <h4>Phân tích từng truy cập</h4>
            <ul>
              <li><strong>a. Địa chỉ ảo nhập: 0x4 (hệ 16), bằng 4 (hệ 10), nhị phân (4 bit) là 0100</strong></li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Tách địa chỉ thành</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Tag (1 bit) = 0</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Index (1 bit) = 1</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Offset (2 bit) = 00</li>

              <li>&nbsp;&nbsp;&nbsp;&nbsp;Tra cứu cache dòng có index = 1</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Cache lúc này trống → Cache Miss</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Nạp block chứa địa chỉ từ 0x4 đến 0x7 vào dòng 1</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Ghi tag = 0, valid bit = 1 cho dòng 1</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Kết quả: Cache dòng 1 cập nhật, CPU đọc dữ liệu sau khi nạp</li>

              <li><strong>b. Địa chỉ ảo nhập: 0x3 (hệ 16), bằng 3 (hệ 10), nhị phân (4 bit) là 0011</strong></li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Tách địa chỉ thành</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Tag (1 bit) = 0</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Index (1 bit) = 0</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Offset (2 bit) = 11</li>

              <li>&nbsp;&nbsp;&nbsp;&nbsp;Tra cứu cache dòng có index = 0</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Cache dòng 0 trống → Cache Miss</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Nạp block chứa địa chỉ từ 0x0 đến 0x3 vào dòng 0</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Ghi tag = 0, valid bit = 1 cho dòng 0</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Kết quả: Cache dòng 0 cập nhật, CPU đọc dữ liệu sau khi nạp</li>

              <li><strong>c. Địa chỉ ảo nhập: 0x1 (hệ 16), bằng 1 (hệ 10), nhị phân (4 bit) là 0001</strong></li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Tách địa chỉ thành</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Tag (1 bit) = 0</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Index (1 bit) = 0</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Offset (2 bit) = 01</li>

              <li>&nbsp;&nbsp;&nbsp;&nbsp;Tra cứu cache dòng 0</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;Cache dòng 0 đã có tag = 0 và valid bit = 1 → Cache Hit</li>
              <li>&nbsp;&nbsp;&nbsp;&nbsp;CPU truy cập dữ liệu trực tiếp từ cache mà không cần nạp lại</li>

              <li></li>
            </ul>

            <h4>Nhận xét</h4>
            <ul>
              <li>Bài mô phỏng trên giúp sinh viên hiểu cơ chế bộ nhớ cache ánh xạ trực tiếp, cách chia địa chỉ thành 
                Tag, Index và Offset để truy xuất dữ liệu giữa cache và bộ nhớ chính. Sinh viên dễ nhận biết Cache 
                Miss khi dòng cache trống hoặc tag khác, buộc phải nạp block mới từ bộ nhớ chính, và Cache Hit khi 
                dữ liệu đã có sẵn. Việc dùng block 4 bytes giúp giảm số lần truy cập bộ nhớ chính, nâng cao hiệu 
                suất. Đồng thời, bài thể hiện nguyên lý ánh xạ trực tiếp và hạn chế xung đột cache trong thực tế.
              </li>
            </ul>
          </div>
        </li>

        <li>
          <strong>Bài 2: Mô phỏng bộ nhớ ảo hãy nhập địa chỉ (dạng hex, ví dụ 0x3) để quan sát dịch địa chỉ qua TLB</strong>
          <div class="image-bonhoao">
            <div class="note1">
              <ul>
                <li><strong>Physical Page Size</strong> → 2</li>
                <li><strong>Offset Bits</strong> → 1</li>
                <li><strong>Virtual Memory Size</strong> → 4</li>
                <li><strong>TLB Entries</strong> → 2</li>
                <li><strong>LOAD<sub>(in hex)</sub>#</strong> → 3</li>
              </ul>
            </div>
            <img src="images/bonhoao.jpg" class="responsive-img3" alt="Mô phỏng bộ nhớ ảo">
          </div>

          <div class="note-box">
            <h4>Cấu hình ban đầu</h4>
            <ul>
              <li>Physical Page Size = 2 → mỗi trang vật lý có kích thước  2<sup>2</sup>  = 4 byte</li>
              <li>Offset Bits = 1 → offset trong trang dùng 1 bit (2 byte/trang)</li>
              <li>Virtual Memory Size = 4 → tổng số địa chỉ ảo là  2<sup>4</sup>  = 16 địa chỉ (từ 0 - 15)</li>
              <li>TLB Entries = 2 → TLB chứa tối đa 2 ánh xạ</li>
            </ul>

            <h4>Nhập địa chỉ ảo LOAD<sub>(in hex)</sub># = 3</h4>
            <ul>
              <li>Địa chỉ ảo nhập: 0x3 (hệ 16), bằng 3 (hệ 10)</li>
              <li>Địa chỉ ảo dạng nhị phân: 0011</li>
            </ul>

            <h4>Tách địa chỉ ảo thành VPN và Offset</h4>
            <ul>
              <li>Offset Bits = 1 → lấy 1 bit cuối của 0011 → Offset = 1</li>
              <li>Phần còn lại là VPN = 01 → số 1 (thập phân)</li>
            </ul>

            <h4>Tra cứu TLB</h4>
            <ul>
              <li>Ban đầu TLB trống → không có ánh xạ cho VPN = 1 → TLB Miss</li>
              <li>Mô phỏng báo TLB Miss và số lượng miss tăng</li>
            </ul>

            <h4>Tra bảng trang (Page Table)</h4>
            <ul>
              <li>Trang ảo 1 có Valid = 1 → hợp lệ</li>
              <li>PPN = 0 → ánh xạ trang ảo 1 sang trang vật lý 0</li>
              <li>Cập nhật TLB: VPN 1 → PPN 0</li>
            </ul>

            <h4>Tính địa chỉ vật lý (Physical Address)</h4>
            <ul>
              <li>Công thức: PPN × Page Size + Offset</li>
              <Offset>Ở đây: PPN = 0, Page Size = 2 (2<sup>1</sup> vì offset bits = 1), Offset = 1</li>
              <li>→ Physical Address = 0 × 2 + 1 = 1</li>
            </ul>

            <h4>Nhận xét</h4>
            <ul>
              <li>Bài mô phỏng này giúp sinh viên làm rõ cơ chế hoạt động của bộ nhớ ảo, nơi địa chỉ ảo do CPU phát
                ra được chuyển thành địa chỉ vật lý thông qua bảng trang và TLB. Thông qua ví dụ cụ thể với địa chỉ
                ảo 0x3, sinh viên có thể quan sát quá trình phân tách địa chỉ thành VPN và Offset, TLB Miss, tra 
                bảng trang và tính địa chỉ vật lý tương ứng. Mô phỏng này giúp sinh viên hiểu vai trò của bộ nhớ ảo
                trong việc quản lý không gian địa chỉ hiệu quả và đảm bảo tính bảo vệ trong hệ thống máy tính.</li>
            </ul>
          </div>
        </li>

      </ol>
    <a href="MoPhongThucHanhKTMT.html" class="back-button">← Quay lại Trang chủ</a>
  </div>

</body>
</html>
