<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài Thực Hành - Mô Phỏng MIPS Assembler & Simolator</title>
    <link rel="stylesheet" href="css/labs.css">
</head>

<body>
    <div class="container">
        <h1>Bài thực hành Mô phỏng Hợp ngữ MIPS - JsSpim</h1>
        <p>
            Các bài thực hành sau đây giúp sinh viên hiểu rõ cách CPU MIPS xử lý chương trình Assembly thông qua công
            cụ mô phỏng trực tuyến MIPS Assembler & Simolator. Công cụ Assembler hỗ trợ viết mã và chuyển đổi lệnh
            MIPS thành mã máy 32-bit, trong khi Simolator mô phỏng quá trình thực thi chương trình ở cấp độ lệnh, bao
            gồm các bước tìm nạp, giải mã và thực thi. Nhờ giao diện trực quan, sinh viên có thể quan sát sự thay đổi
            của các thanh ghi và bộ nhớ theo từng bước thực hiện, từ đó nắm bắt được nguyên lý vận hành của CPU mà
            không cần cài đặt phần mềm chuyên dụng.
        </p>

        <h2>Bài 4.1 – Làm quen với JsSpim và lệnh syscall cơ bản</h2>
        <div class="note-box">

            <h4>Mục tiêu</h4>
            <ol>
                <li>Hiểu giao diện mô phỏng JsSpim.</li>
                <li>Sử dụng các lệnh syscall để in số, in chuỗi và nhập dữ liệu từ bàn phím.</li>
            </ol>

            <h4>Hướng dẫn thực hiện</h4>
            <ol>
                <li>Mở trang mô phỏng:
                    <a href="https://spimsimolator.sourceforge.net/jsSpim.html" target="_blank">
                        https://spimsimolator.sourceforge.net/jsSpim.html
                    </a>
                </li>

                <li>
                    Gõ mã nguồn:
                    <pre>
.data
msg: .asciiz "Nhap mot so: "
.text
main:
    li $v0, 4
    la $a0, msg
    syscall          # in chuỗi

    li $v0, 5
    syscall          # nhập số → $v0

    move $t0, $v0
    li $v0, 1
    move $a0, $t0
    syscall          # in số

    li $v0, 10
    syscall
      </pre>
                </li>

                <li>Nhấn Run → quan sát vùng Output (Hình 5.2).</li>
                </ol>
                <div class="image-container">
                    <img src="images/MIPS-output.png" class="responsive-img1">
                </div>

                <h4>Câu hỏi ôn tập</h4>
                <ol>
                    <li>Thanh ghi <code>$v0</code> dùng để làm gì trước mỗi syscall?</li>
                    <li>Vì sao phải gán giá trị vào <code>$a0</code> khi in chuỗi?</li>
                </ol>

        </div>

        <h2>Bài 4.2 – Cấu trúc điều kiện IF–ELSE</h2>
        <div class="note-box">

            <h4>Mục tiêu</h4>
            <ol>
                <li>Sử dụng các lệnh so sánh và nhảy có điều kiện: <code>beq</code>, <code>bne</code>, <code>blt</code>,
                    <code>bgt</code>.
                </li>
            </ol>

            <h4>Hướng dẫn thực hiện</h4>
            <ol>
                <li>
                    Viết chương trình:
                    <pre>
.data
msg1: .asciiz "A lon hon B\n"
msg2: .asciiz "A khong lon hon B\n"

.text
main:
    li $t0, 7
    li $t1, 5

    ble $t0, $t1, else   # nếu t0 <= t1 → nhảy đến else

    li $v0, 4
    la $a0, msg1
    syscall              # in msg1
    j exit

else:
    li $v0, 4
    la $a0, msg2
    syscall              # in msg2

exit:
    li $v0, 10
    syscall
      </pre>
                </li>

                <li>Run → Quan sát vùng Output (Hình 5.3).</li>
                <div class="image-container">
                    <img src="images/hinh-5-3.png" class="responsive-img1">
                </div>

                <li>Thay đổi giá trị <code>$t0</code> và <code>$t1</code> để kiểm tra các trường hợp true/false.</li>
                <div class="image-container">
                    <img src="images/hinh-5-4.png" class="responsive-img1">
                </div>

            </ol>

            <h4>Câu hỏi ôn tập</h4>
            <ol>
                <li>Phân biệt <code>beq</code> và <code>bne</code>.</li>
                <li>Khi nào nên dùng <code>j</code> thay vì <code>beq</code>?</li>
            </ol>

        </div>

        <h2>Bài 4.3 – Vòng lặp for và tính tổng dãy số</h2>
        <div class="note-box">

            <h4>Mục tiêu</h4>
            <ol>
                <li>Viết vòng lặp for trong MIPS để tính tổng từ 1 → N.</li>
            </ol>

            <h4>Hướng dẫn</h4>
            <ol>
                <li>
                    Mã chương trình:
                    <pre>
.data
n: .word 5
.text
main:
    lw $t0, n        # i (giới hạn)
    li $t1, 1        # sum
    li $t2, 0        # counter

loop:
    add  $t1, $t1, $t2
    addi $t2, $t2, 1
    blt  $t2, $t0, loop

    li $v0, 1
    move $a0, $t1
    syscall

    li $v0, 10
    syscall
      </pre>
                </li>

                <li>Quan sát sự thay đổi của các thanh ghi <code>$t1</code> (sum) và <code>$t2</code> (counter).</li>

                <li>Vẽ sơ đồ vòng lặp:<br>
                    <b>init → loop → add → compare → branch → exit</b>
                </li>
            </ol>

            <h4>Câu hỏi ôn tập</h4>
            <ol>
                <li>Nếu điều kiện <code>blt</code> đổi thành <code>bge</code>, chuyện gì xảy ra?</li>
                <li><code>$t2</code> và <code>$t0</code> đóng vai trò gì trong vòng lặp?</li>
            </ol>

        </div>



        <h2>Bài 4.4 – Làm việc với mảng và xâu ký tự</h2>
        <div class="note-box">

            <h4>Mục tiêu</h4>
            <ol>
                <li>Duyệt mảng ký tự và in từng phần tử.</li>
                <li>Sử dụng syscall 11 để in ký tự.</li>
            </ol>

            <h4>Hướng dẫn</h4>
            <ol>
                <li>
                    Mã chương trình:
                    <pre>
.data
str: .asciiz "HELLO"
.text
main:
    la $t0, str

loop:
    lb $t1, 0($t0)
    beqz $t1, exit

    li $v0, 11
    move $a0, $t1
    syscall

    addi $t0, $t0, 1
    j loop

exit:
    li $v0, 10
    syscall
      </pre>
                </li>

                <li>Chạy chương trình → quan sát Output: <b>HELLO</b>.</li>
            </ol>

            <h4>Câu hỏi ôn tập</h4>
            <ol>
                <li>Sự khác biệt giữa <code>lb</code> và <code>lw</code>.</li>
                <li>Tại sao xâu phải kết thúc bằng ký tự 0 (NolL)?</li>
            </ol>

        </div>

        <body>

</html>